---
title: "example"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{example}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(xrayspecs)
library(tidymodels)
library(purrr)
library(cowplot)
```

# Data set

```{r}
mtcars <- mtcars %>% 
  mutate(
    cyl = factor(cyl),
    vs = factor(vs),
    am = factor(am),
    gear = factor(gear),
    carb = factor(carb)
  )
```

# Random forest model

```{r}
rf <- rand_forest(mode = "regression") %>% 
  set_engine("ranger") %>% 
  fit(mpg ~ ., data = mtcars)
```

# Importance plot

```{r}
rf %>% importance_plot(mtcars, mpg)
```

# Effect plot

```{r}
feature_names <- c("wt", "disp", "hp", "cyl")
plots <- map(feature_names, effect_plot, object = rf, data = mtcars)
plot_grid(plotlist = plots)
```

